<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome 擴充功能管理器</title>
    <link rel="stylesheet" href="styles/themes.css">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body data-theme="dark">
    <div class="container">
        <!-- 頂部導航 -->
        <div class="header">
            <h1>🎯 Chrome 擴充功能管理器</h1>
            <div class="nav-buttons">
                <button class="nav-btn active" data-view="manager">管理器</button>
                <button class="nav-btn" data-view="history">歷史記錄</button>
                <button class="nav-btn" data-view="settings">設定</button>
            </div>
        </div>

        <!-- 主內容區 -->
        <div class="main-content">
            <!-- 左側邊欄 - 群組 -->
            <div class="sidebar">
                <!-- 設備群組篩選 -->
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h3 style="font-size: 12px; color: var(--text-secondary); text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px; margin: 0;">設備分類</h3>
                        <div style="display: flex; gap: 4px;">
                            <button class="action-btn" data-action="addDeviceGroup" style="padding: 4px 8px; font-size: 11px;">+ 新增</button>
                            <button class="action-btn" data-action="manageDeviceGroups" style="padding: 4px 8px; font-size: 11px;">⚙️ 管理</button>
                        </div>
                    </div>
                    <ul class="device-group-list" id="deviceGroupList" style="list-style: none; padding: 0; margin: 0;">
                        <!-- 動態生成設備群組列表 -->
                    </ul>
                </div>

                <!-- 功能群組分類 -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3>功能分類</h3>
                    <button class="action-btn" data-action="addNewGroup" title="新增群組" style="padding: 4px 8px; font-size: 12px;">+ 新增</button>
                </div>
                <ul class="group-list" id="groupList">
                    <li class="group-item active" data-group="all">
                        <span>所有擴充功能</span>
                        <span class="count" id="countAll">0</span>
                    </li>
                    <li class="group-item" data-group="adblocker">
                        <span>🛡️ 廣告封鎖與隱私</span>
                        <span class="count" id="countAdblocker">0</span>
                    </li>
                    <li class="group-item" data-group="ai">
                        <span>🤖 AI助手與聊天</span>
                        <span class="count" id="countAi">0</span>
                    </li>
                    <li class="group-item" data-group="productivity">
                        <span>📌 生產力工具</span>
                        <span class="count" id="countProductivity">0</span>
                    </li>
                    <li class="group-item" data-group="dev">
                        <span>💻 開發工具</span>
                        <span class="count" id="countDev">0</span>
                    </li>
                    <li class="group-item" data-group="screenshot">
                        <span>📸 截圖與複製</span>
                        <span class="count" id="countScreenshot">0</span>
                    </li>
                    <li class="group-item" data-group="youtube">
                        <span>🎬 YouTube工具</span>
                        <span class="count" id="countYoutube">0</span>
                    </li>
                    <li class="group-item" data-group="translate">
                        <span>🌐 翻譯工具</span>
                        <span class="count" id="countTranslate">0</span>
                    </li>
                    <li class="group-item" data-group="scraper">
                        <span>🔍 資料抓取</span>
                        <span class="count" id="countScraper">0</span>
                    </li>
                    <li class="group-item" data-group="other">
                        <span>🔧 其他工具</span>
                        <span class="count" id="countOther">0</span>
                    </li>
                </ul>

                <!-- 保留記錄區 -->
                <div style="margin-top: 24px; padding-top: 20px; border-top: 2px solid var(--border-color);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h3 style="font-size: 14px; color: var(--warning-color); margin: 0;">🗑️ 保留記錄</h3>
                        <span id="archiveCount" style="font-size: 12px; color: var(--text-secondary);">0</span>
                    </div>
                    <div style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 6px; padding: 12px;">
                        <div class="archive-item" data-action="showDeletedExtensions" style="cursor: pointer; padding: 10px; border-radius: 4px; transition: all 0.2s; margin-bottom: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 13px; color: var(--text-primary);">📦 已刪除</span>
                                <span id="countDeleted" class="count" style="font-size: 12px;">0</span>
                            </div>
                        </div>
                        <div class="archive-item" data-action="showUnavailableExtensions" style="cursor: pointer; padding: 10px; border-radius: 4px; transition: all 0.2s;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 13px; color: var(--text-primary);">⚠️ 不可用</span>
                                <span id="countUnavailable" class="count" style="font-size: 12px;">0</span>
                            </div>
                        </div>
                    </div>
                    <button class="action-btn danger" data-action="cleanupArchive" style="width: 100%; margin-top: 12px; padding: 8px; font-size: 12px;">清理記錄</button>
                </div>
            </div>

            <!-- 中間內容區 -->
            <div class="content" id="mainContent">
                <!-- 載入狀態 -->
                <div id="loadingState" class="loading">
                    載入擴充功能中...
                </div>
            </div>

            <!-- 右側面板 -->
            <div class="right-panel">
                <!-- 統計資訊 -->
                <div class="panel-section">
                    <h3>📊 統計資訊</h3>
                    <div style="background: var(--card-bg); border: 1px solid var(--border-color); padding: 16px; border-radius: 6px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: var(--text-secondary);">總擴充功能</span>
                            <strong id="totalCount" style="color: var(--text-primary);">0</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: var(--text-secondary);">已啟用</span>
                            <strong id="enabledCount" style="color: var(--success-color);">0</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">已停用</span>
                            <strong id="disabledCount" style="color: var(--warning-color);">0</strong>
                        </div>
                    </div>
                </div>

                <!-- 最近變更 -->
                <div class="panel-section">
                    <h3>📝 最近變更</h3>
                    <div id="recentChanges" style="background: var(--card-bg); border: 1px solid var(--border-color); padding: 16px; border-radius: 6px;">
                        <div style="font-size: 13px; color: var(--text-secondary);">
                            暫無變更記錄
                        </div>
                    </div>
                </div>

                <!-- 快照記錄 -->
                <div class="panel-section">
                    <h3>📸 快照記錄</h3>
                    <div class="auto-snapshot-toggle">
                        <input type="checkbox" id="autoSnapshot" checked>
                        <label for="autoSnapshot">自動每日快照</label>
                    </div>
                    <div id="snapshotList">
                        <!-- 動態生成快照列表 -->
                    </div>
                    
                    <!-- 批量控制 - 隱藏在底部 -->
                    <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button id="btnGroupDisable" class="action-btn danger" style="font-size: 11px; padding: 6px 10px; opacity: 0.7;">全部停用</button>
                            <button id="btnGroupEnable" class="action-btn" style="font-size: 11px; padding: 6px 10px; opacity: 0.7;">全部啟用</button>
                        </div>
                        <small style="display: block; text-align: center; color: var(--text-secondary); margin-top: 4px; font-size: 10px;">批量控制當前群組</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="options.js"></script>
</body>
</html>
